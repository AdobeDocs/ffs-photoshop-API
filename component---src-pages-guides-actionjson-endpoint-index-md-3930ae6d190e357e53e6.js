"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2258],{70258:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return r},default:function(){return u}});var a=t(58168),o=t(80045),i=(t(88763),t(15680)),l=t(83407);const s=["components"],r={},p=(m="Media",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var m;const d={_frontmatter:r},c=l.A;function u(e){let{components:n}=e,t=(0,o.A)(e,s);return(0,i.mdx)(c,(0,a.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"getting-started-with-actionjson"},"Getting started with ActionJSON"),(0,i.mdx)("p",null,"ActionJSON is similar to the Photoshop Actions endpoint, allowing you to apply the contents of an ATN file to an image programmatically. However, there is added flexibility when you use ActionJSON."),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"/actionJSON")," endpoint accepts an input file, applies any Photoshop Action file to it, and edits the steps within the original action file to create dynamic changes to an otherwise static Action file."),(0,i.mdx)("p",null,"These changes can include:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Modifying the payload, such as adding an action."),(0,i.mdx)("li",{parentName:"ul"},"Applying an ATN file to an image without uploading and storing your ATN file at Firefly Services as you do with the Photoshop Actions endpoint.")),(0,i.mdx)("p",null,"Watch this tutorial video and read on to learn more about ActionJSON."),(0,i.mdx)(p,{slots:"video",width:"750",height:"500",mdxType:"Media"}),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://youtu.be/giFJ6qbez_I?feature=shared"},"https://youtu.be/giFJ6qbez_I?feature=shared")),(0,i.mdx)("h2",{id:"implementation-example"},"Implementation example"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1022px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/5530d/spanielsBW.webp 320w","/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/0c8fb/spanielsBW.webp 640w","/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/febeb/spanielsBW.webp 1022w"],sizes:"(max-width: 1022px) 100vw, 1022px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/dd4a7/spanielsBW.png 320w","/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/0f09e/spanielsBW.png 640w","/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/e5fd4/spanielsBW.png 1022w"],sizes:"(max-width: 1022px) 100vw, 1022px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ffs-photoshop-API/static/93237573e560d857ecd1852701689590/e5fd4/spanielsBW.png",alt:"alt image",title:"Original Image",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"In this example, we use a familiar asset and action file and modify the payload to return an output that executes all of the steps of the original action with one modification. Instead of color, we're going to use ActionJSON to return a black and white image."),(0,i.mdx)("p",null,"This full action file contains over 70 steps, so we don't show the entire JSON payload here. But you can see the part we modified to achieve the output below."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/pie/psdService/actionJSON \\\n  -H "Authorization: Bearer $token"  \\\n  -H "x-api-key: $apiKey" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n  "inputs": [{\n  "href": "<SIGNED_GET_URL>",\n  "storage": "<storage>"\n  }],\n  "options": {\n    "actionJSON": [{\n        "_obj": "imageSize",\n        "constrainProportions": true,\n        "interfaceIconFrameDimmed": {\n          "_enum": "interpolationType",\n          "_value": "automaticInterpolation"\n        },\n        "scaleStyles": true\n      }, {\n        "_obj": "imageSize",\n        "constrainProportions": true,\n        "interfaceIconFrameDimmed": {\n          "_enum": "interpolationType",\n          "_value": "automaticInterpolation"\n        },\n        "resolution": {\n          "_unit": "densityUnit",\n          "_value": 72.0\n        },\n        "scaleStyles": true\n      },\n      {\n        "_obj": "make",\n        "_target": [{\n          "_ref": "adjustmentLayer"\n        }],\n        "using": {\n          "_obj": "adjustmentLayer",\n          "type": {\n            "_obj": "blackAndWhite",\n            "blue": 20,\n            "cyan": 60,\n            "grain": 40,\n            "magenta": 80,\n            "presetKind": {\n              "_enum": "presetKindType",\n              "_value": "presetKindDefault"\n            },\n            "red": 40,\n            "tintColor": {\n              "_obj": "RGBColor",\n              "blue": 179.00115966796876,\n              "grain": 211.00067138671876,\n              "red": 225.00045776367188\n            },\n            "useTint": false,\n            "yellow": 60\n          }\n        }\n      }\n    ]\n  },\n  "outputs": [{\n    "type": "image/jpeg",\n    "storage": "<storage>",\n    "href": "<SIGNED_POST_URL>"\n  }]\n}\'\n')),(0,i.mdx)("h2",{id:"creating-actionjson-files"},"Creating actionJSON files"),(0,i.mdx)("h3",{id:"setting-up-developer-mode"},"Setting up developer mode"),(0,i.mdx)("p",null,"To enable developer mode in your Photoshop app, follow these steps:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Navigate to:"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Photoshop → Preferences → Plugins... (For Mac)."),(0,i.mdx)("li",{parentName:"ul"},"Edit → Preferences → Plugins... (For Windows)."))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Select ",(0,i.mdx)("em",{parentName:"p"},"Enable Developer Mode"),".")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Quit Photoshop.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Reopen your Photoshop app with developer mode enabled."))),(0,i.mdx)("p",null,"If you're using Photoshop 23.4 (July 2022) or earlier, enable developer mode as a hidden feature by executing the command below."),(0,i.mdx)("p",null,"For Mac:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'echo "UXPEnableScriptingUtilities 1" >>  "/Users/$USER/Library/Preferences/Adobe Photoshop 2021 Settings/PSUserConfig.txt"\n')),(0,i.mdx)("p",null,"For Windows Powershell:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},'echo  "UXPEnableScriptingUtilities 1" >> "C:\\Users\\$env:USERNAME\\AppData\\Roaming\\Adobe\\Adobe Photoshop 2021\\Adobe Photoshop 2021 Settings\\PSUserConfig.txt"\n')),(0,i.mdx)("h3",{id:"creating-new-actionjson"},"Creating new actionJSON"),(0,i.mdx)("p",null,"If you have developer mode enabled in Photoshop follow the instructions below. If you don't have developer mode enabled below please see the previous section."),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Open the Photoshop app."),(0,i.mdx)("li",{parentName:"ol"},"Select Settings → Plugins."),(0,i.mdx)("li",{parentName:"ol"},"Select Development."),(0,i.mdx)("li",{parentName:"ol"},"Select Record Action Commands...."),(0,i.mdx)("li",{parentName:"ol"},"Name your file and click ",(0,i.mdx)("strong",{parentName:"li"},"Save"),". You can now make select actions in Photoshop such as resizing an image, adjusting hue and saturation and so on. Photoshop saves all of your actions in your new file.")),(0,i.mdx)("p",null,"Once you're done recording your action, you can stop recording and save:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Select Settings → Plugins."),(0,i.mdx)("li",{parentName:"ol"},"Select Development."),(0,i.mdx)("li",{parentName:"ol"},"Click ",(0,i.mdx)("strong",{parentName:"li"},"Stop Action Recording"),".")),(0,i.mdx)("p",null,"Photoshop app saves your actions to the directory you chose when you named your file."),(0,i.mdx)("h3",{id:"creating-actionjson-in-actions-panel"},"Creating actionJSON in Actions Panel"),(0,i.mdx)("p",null,"You can alternatively create a new file in your Photoshop app's Action Panel:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Go to Windows → Actions. The action panel opens."),(0,i.mdx)("li",{parentName:"ol"},"Select ",(0,i.mdx)("strong",{parentName:"li"},"New Action...")," to create a new action, or click ",(0,i.mdx)("inlineCode",{parentName:"li"},"+")," in the panel.\n",(0,i.mdx)("span",{parentName:"li",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1232px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"55.00000000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/5530d/actions_panel_menu.webp 320w","/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/0c8fb/actions_panel_menu.webp 640w","/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/82691/actions_panel_menu.webp 1232w"],sizes:"(max-width: 1232px) 100vw, 1232px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/dd4a7/actions_panel_menu.png 320w","/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/0f09e/actions_panel_menu.png 640w","/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/a6f0e/actions_panel_menu.png 1232w"],sizes:"(max-width: 1232px) 100vw, 1232px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/ffs-photoshop-API/static/4e6a535473dd472b5f1c832714b9a2ab/a6f0e/actions_panel_menu.png",alt:"alt image",title:"Original Image",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("li",{parentName:"ol"},"Select your action from the action set."),(0,i.mdx)("li",{parentName:"ol"},"Select ",(0,i.mdx)("strong",{parentName:"li"},"Copy as Javascript"),"."),(0,i.mdx)("li",{parentName:"ol"},"Paste the contents in any text editor."),(0,i.mdx)("li",{parentName:"ol"},"Modify the file to trim out the actions.")),(0,i.mdx)("p",null,"Now you can use the action in your Photoshop API payload."),(0,i.mdx)("h3",{id:"converting-atn-files-into-actionjson"},"Converting ATN files into actionJSON"),(0,i.mdx)("p",null,"This endpoint enables you to convert an ",(0,i.mdx)("em",{parentName:"p"},".atn")," file to actionJSON format. This is the simplest and easiest way to create an actionJSON file."),(0,i.mdx)("h3",{id:"converting-atn-files-into-actionjson-with-photoshop"},"Converting ATN files into actionJSON with Photoshop"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"Go to Windows → Actions. The action panel opens."),(0,i.mdx)("li",{parentName:"ol"},"Select ",(0,i.mdx)("strong",{parentName:"li"},"Load action"),"."),(0,i.mdx)("li",{parentName:"ol"},"Choose the action you would like to convert to actionJSON."),(0,i.mdx)("li",{parentName:"ol"},"Click on ",(0,i.mdx)("strong",{parentName:"li"},"Copy as Javascript"),"."),(0,i.mdx)("li",{parentName:"ol"},"Paste the contents in any text editor."),(0,i.mdx)("li",{parentName:"ol"},"Modify the file to trim out the actions obj blocks. An example is shown below in the code sample.")),(0,i.mdx)("p",null,"You can now use the action in your payload."),(0,i.mdx)("p",null,"Here is a code sample of Action JSON when you copy actions as Javascript from Photoshop:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'async function vignetteSelection() {\n    let result;\n    let psAction = require("photoshop").action;\n\n    let command = [\n        // Make snapshot\n        {"_obj":"make","_target":[{"_ref":"snapshotClass"}],"from":{"_property":"currentHistoryState","_ref":"historyState"},"using":{"_enum":"historyState","_value":"fullDocument"}},\n        // Feather\n        {"descriptor": {"_obj":"feather","radius":{"_unit":"pixelsUnit","_value":5.0}}, "options": {"dialogOptions": "display"}},\n        // Layer Via Copy\n        {"_obj":"copyToLayer"},\n        // Show current layer\n        {"_obj":"show","null":[{"_enum":"ordinal","_ref":"layer","_value":"targetEnum"}],"toggleOptionsPalette":true},\n        // Make layer\n        {"_obj":"make","_target":[{"_ref":"layer"}]},\n        // Fill\n        {"_obj":"fill","mode":{"_enum":"blendMode","_value":"normal"},"opacity":{"_unit":"percentUnit","_value":100.0},"using":{"_enum":"fillContents","_value":"white"}},\n        // Move current layer\n        {"_obj":"move","_target":[{"_enum":"ordinal","_ref":"layer","_value":"targetEnum"}],"to":{"_enum":"ordinal","_ref":"layer","_value":"previous"}}\n    ];\n    result = await psAction.batchPlay(command, {});\n}\n\nasync function runModalFunction() {\n    await require("photoshop").core.executeAsModal(vignetteSelection, {"commandName": "Action Commands"});\n}\n\nawait runModalFunction();\n')),(0,i.mdx)("p",null,"Modify the JavaScript file to trim out the actions. Remove everything else from the JavaScript file and copy the array containing ",(0,i.mdx)("inlineCode",{parentName:"p"},"_obj")," from the ",(0,i.mdx)("inlineCode",{parentName:"p"},"command")," variable, which will look similar to what's shown  below."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-js"},'[  \n {"_obj":"make","_target":[{"_ref":"snapshotClass"}],"from":{"_property":"currentHistoryState","_ref":"historyState"},\n "using":{"_enum":"historyState","_value":"fullDocument"}},\n {"_obj":"feather","radius":{"_unit":"pixelsUnit","_value":5.0}},\n {"_obj":"copyToLayer"},\n {"_obj":"show","null":[{"_enum":"ordinal","_ref":"layer","_value":"targetEnum"}],"toggleOptionsPalette":true},\n {"_obj":"make","_target":[{"_ref":"layer"}]},\n {"_obj":"fill","mode":{"_enum":"blendMode","_value":"normal"},"opacity":{"_unit":"percentUnit","_value":100.0},"using":{"_enum":"fillContents","_value":"white"},\n {"_obj":"move","_target":[{"_enum":"ordinal","_ref":"layer","_value":"targetEnum"}],"to":{"_enum":"ordinal","_ref":"layer","_value":"previous"}}\n]\n')),(0,i.mdx)("p",null,"Find ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/photoshop/uxp/2022/ps_reference/media/batchplay/"},"details about actionJSON at Photoshop API, ",(0,i.mdx)("inlineCode",{parentName:"a"},"batchPlay")),"."),(0,i.mdx)("h3",{id:"executing-an-actionjson-with-multiple-inputs"},"Executing an actionJSON with multiple inputs"),(0,i.mdx)("p",null,"With ",(0,i.mdx)("inlineCode",{parentName:"p"},"/actionJSON")," endpoint you can use multiple images to do compositing."),(0,i.mdx)("p",null,"To supply multiple images and have it specified in the actionJSON, create a Placeholder Value in your actionJSON. The placeholder value must be ",(0,i.mdx)("inlineCode",{parentName:"p"},"ACTION_JSON_OPTIONS_ADDITIONAL_IMAGES_X")," where ",(0,i.mdx)("inlineCode",{parentName:"p"},"X")," is the index of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"additionalImages")," array."),(0,i.mdx)("p",null,"For example, say an actionJSON requires two additional images:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"ACTION_JSON_OPTIONS_ADDITIONAL_IMAGES_0")," == ",(0,i.mdx)("inlineCode",{parentName:"li"},"options.additionalImages[0]")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"ACTION_JSON_OPTIONS_ADDITIONAL_IMAGES_1")," == ",(0,i.mdx)("inlineCode",{parentName:"li"},"options.additionalImages[1]"))),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/pie/psdService/actionJSON \\\n  -H "Authorization: Bearer $token"  \\\n  -H "x-api-key: $apiKey" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n  "inputs": [\n    {\n      "href": "<SIGNED_GET_URL>",\n      "storage": "<storage>"\n    }\n  ],\n  "options": {\n    "additionalImages": [\n      {\n        "href": "<SIGNED_GET_URL>",\n        "storage": "<storage>"\n      }\n    ],\n    "actionJSON": [\n    {\n      "ID": 3,\n      "_obj": "placeEvent",\n      "freeTransformCenterState": {\n        "_enum": "quadCenterState",\n        "_value": "QCSAverage"\n      },\n      "null": {\n        "_kind": "local",\n        "_path": "ACTION_JSON_OPTIONS_ADDITIONAL_IMAGES_0"\n      },\n      "offset": {\n        "_obj": "offset",\n        "horizontal": {\n          "_unit": "pixelsUnit",\n          "_value": 0\n        },\n        "vertical": {\n          "_unit": "pixelsUnit",\n          "_value": 0\n        }\n      }\n    },\n    {\n      "_obj": "autoCutout",\n      "sampleAllLayers": false\n    },\n    {\n      "_obj": "make",\n      "at": {\n        "_enum": "channel",\n        "_ref": "channel",\n        "_value": "mask"\n      },\n      "new": {\n        "_class": "channel"\n      },\n      "using": {\n        "_enum": "userMaskEnabled",\n        "_value": "revealSelection"\n      }\n    },\n    {\n      "_obj": "set",\n      "_target": [\n        {\n          "_property": "selection",\n          "_ref": "channel"\n        }\n      ],\n      "to": {\n        "_enum": "ordinal",\n        "_value": "allEnum"\n      }\n    },\n    {\n      "_obj": "align",\n      "_target": [\n        {\n          "_enum": "ordinal",\n          "_ref": "layer"\n        }\n      ],\n      "alignToCanvas": false,\n      "using": {\n        "_enum": "alignDistributeSelector",\n        "_value": "ADSBottoms"\n      }\n    },\n    {\n      "_obj": "align",\n      "_target": [\n        {\n          "_enum": "ordinal",\n          "_ref": "layer"\n        }\n      ],\n      "alignToCanvas": false,\n      "using": {\n        "_enum": "alignDistributeSelector",\n        "_value": "ADSRights"\n      }\n    },\n    {\n      "_obj": "set",\n      "_target": [\n        {\n          "_property": "selection",\n          "_ref": "channel"\n        }\n      ],\n      "to": {\n        "_enum": "ordinal",\n        "_value": "none"\n      }\n    }\n  ]\n\n  },\n  "outputs": [\n    {\n      "type": "image/jpeg",\n      "href": "<SIGNED_PUT_URL>",\n      "storage": "<storage>"\n    }\n  ]\n}\'\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-actionjson-endpoint-index-md-3930ae6d190e357e53e6.js.map