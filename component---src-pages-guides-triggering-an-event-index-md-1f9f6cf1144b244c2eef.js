"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9729],{80343:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return r},default:function(){return h}});var a=t(58168),o=t(80045),i=(t(88763),t(15680)),s=t(83407);const d=["components"],r={},p={_frontmatter:r},m=s.A;function h(e){let{components:n}=e,t=(0,o.A)(e,d);return(0,i.mdx)(m,(0,a.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"triggering-an-event-from-the-apis"},"Triggering an Event from the APIs"),(0,i.mdx)("p",null,"In order to start receiving the events in your Webhook Application, the additional thing that needs to be done is to pass in your IMS ORG ID in a header: ",(0,i.mdx)("inlineCode",{parentName:"p"},"x-gw-ims-org-id: <YOUR_IMS_ORG_ID>"),", when you make an API call to initiate a job. Please have a look at the example below that demonstrates the usage of the new header and a sample event received for that job."),(0,i.mdx)("h2",{id:"example-1-retrieving-a-psd-manifest-from-the-photoshop-api"},"Example 1: Retrieving a PSD manifest from the Photoshop API"),(0,i.mdx)("h3",{id:"step-1-initiate-a-job-to-retrieve-a-psds-json-manifest"},"Step 1: Initiate a job to retrieve a PSD's JSON manifest"),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"/documentManifest")," api can take one or more input PSD's to generate JSON manifest files from. The JSON manifest is the tree representation of all of the layer objects contained in the PSD document. Using Example.psd, with the use case of a document stored in your external storage, a typical curl call might look like this:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-shell"},'curl -X POST \\\n  https://image.adobe.io/pie/psdService/documentManifest \\\n  -H "Authorization: Bearer $token"  \\\n  -H "x-api-key: $apiKey" \\\n  -H "Content-Type: application/json" \\\n  -H \'x-gw-ims-org-id: <YOUR_IMS_ORG_ID>\' \\\n  -d \'{\n  "inputs": [\n    {\n      "href":"<SIGNED_GET_URL>",\n      "storage":"<storage>"\n    }\n  ]\n}\'\n')),(0,i.mdx)("p",null,"This initiates an asynchronous job and returns a response containing the href to poll for job status and the JSON manifest."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "_links": {\n        "self": {\n            "href": "https://image.adobe.io/pie/psdService/status/63c6e812-6cb8-43de-8a60-3681a9ec6feb"\n        }\n    }\n}\n')),(0,i.mdx)("h3",{id:"step-2-receive-the-jobs-status-on-the-webhook-application-when-the-job-is-complete"},"Step 2: Receive the Job's status on the Webhook application when the job is complete"),(0,i.mdx)("p",null,"The value in the key ",(0,i.mdx)("inlineCode",{parentName:"p"},"body")," inside the event JSON contains the result of the job. Here is a sample event received from the job initiated above:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "event_id": "b412a90e-8bc0-4f0d-931e-9e9b8d24993d",\n  "event": {\n    "header": {\n      "msgType": "JOB_COMPLETION_STATUS",\n      "msgId": "8afa1a46-2733-406c-a646-e1c1acdee333",\n      "imsOrgId": "<YOUR_IMS_ORG_ID>",\n      "eventCode": "photoshop-job-status",\n      "_pipelineMeta": {\n        "pipelineMessageId": "1586288145511:631472:VA7_A1:142:0"\n      },\n      "_smarts": {\n        "definitionId": "3ee6c9056a9d72fc40e09ddf5fdbb0af752e8e49",\n        "runningSmartId": "psmart-yw6wosjksniuuathenny"\n      },\n      "_adobeio": {\n        "imsOrgId": "<YOUR_IMS_ORG_ID>",\n        "providerMetadata": "di_event_code",\n        "eventCode": "photoshop-job-status"\n      }\n    },\n    "body": {\n      "jobId": "63c6e812-6cb8-43de-8a60-3681a9ec6feb",\n      "outputs": [\n        {\n          "status": "succeeded",\n          "layers": [\n            {\n              "id": 2,\n              "index": 0,\n              "type": "layer",\n              "name": "Layer",\n              "locked": false,\n              "visible": true,\n              "bounds": {\n                "top": 0,\n                "left": 0,\n                "width": 100,\n                "height": 100\n              },\n              "blendOptions": {\n                "opacity": 100,\n                "mode": "normal"\n              }\n            }\n          ],\n          "document": {\n            "name": "test.psd",\n            "width": 1000,\n            "height": 1000,\n            "bitDepth": 8,\n            "imageMode": "rgb",\n            "photoshopBuild": "Adobe Creative Imaging Service"\n          }\n        }\n      ],\n      "_links":{\n        "self":{\n          "href":"https://image.adobe.io/pie/psdService/status/8ec6e4f5-b580-41ac-b693-a72f150fec59"\n        }\n      }\n    }\n  }\n}\n')))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-triggering-an-event-index-md-1f9f6cf1144b244c2eef.js.map